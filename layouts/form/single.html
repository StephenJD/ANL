{{/* layouts/forms/single.html */}}
{{ define "main" }}
  {{ $current_page := . }}
  
  {{ $rawAccess := .Params.access | default "public" }}
  {{ $access := slice }}
  
  {{ if $rawAccess }}
    {{ range (split (printf "%v" $rawAccess) ",") }}
      {{ $clean := trim . " " }}
      {{ if $clean }}
        {{ $access = $access | append (lower $clean) }}
      {{ end }}
    {{ end }}
  {{ else }}
    {{ $access = slice "public" }}
  {{ end }}  
  
  <link rel="stylesheet" href="{{ "css/forms.css" | relURL }}">
  
  {{/* <div> Opened in this parial */}}
  {{ partial "anl_page_chrome.html" $current_page }}
  
  <div class="form-container">
    <h1>{{ .Title }}</h1>
    {{ partial "form_request.html" . }}
    {{ partial "page_access_message.html" . }}

    <form name="{{ .Title | urlize }}" autocomplete="off" class="verified-form" data-netlify="true" netlify>
      {{ if not (in $access "public") }}
        <div id="gated_page_placeholder">Loadingâ€¦</div>
      {{ else }}
        {{ .Content }}
      {{ end }}
    </form>
  </div>
</div>

<script type="module" src="{{ "js/form_access_controller.js" | relURL }}" defer></script>
<script type="module" src="{{ "js/form-init.js" | relURL }}" defer></script>

{{ end }}
