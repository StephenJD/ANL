{{ define "main" }}
{{ $homeBundle := site.GetPage "home/index.md" }}

{{ $homeSections := sort ($homeBundle.Resources.ByType "page") "Params.weight" }}

{{ $showDebug := false }}  {{/* change to true to see debug */}}

{{ if $showDebug }}
<div style="border: 5px solid red; padding: 1rem; text-align: center;">
  HOME LAYOUT ACTIVE \layouts\index.html
  Revised 15
</div>

<pre style="border:1px solid blue; padding:1rem; margin-top:1rem;">
Files under content/home/:
{{ range $homeBundle.Resources.ByType "page" }} 
Path: {{ .File.Path }} | Base: {{ .File.BaseFileName }} | Title: {{ .Title }} | Weight: {{ .Weight }} 
{{ end }}
</pre>
{{ end }}

{{/* Logo */}}
{{ $logo := "" }}
{{ with $homeBundle.Params.hero_logo }}
  {{ $res := $homeBundle.Resources.GetMatch . }}
  {{ if $res }}
    {{ $logo = $res.RelPermalink }}
  {{ end }}
{{ end }}

{{/* Background */}}
{{ $bg := "" }}
{{ with $homeBundle.Params.hero_background }}
  {{ $res := $homeBundle.Resources.GetMatch . }}
  {{ if $res }}
    {{ $bg = $res.RelPermalink }}
  {{ end }}
{{ end }}

<div style="
  background-color: #f0f0f0;
  {{ if $bg }}background-image: url('{{ $bg }}');{{ end }}
  background-size: cover;
  background-position: center;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  padding: 2rem;
">

  <!-- Hero logo -->
  <div style="
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    width: 100%;
    margin-bottom: 2rem;
  ">
    {{ if $logo }}
      <img src="{{ $logo }}" alt="ANL Logo" style="max-width:300px; margin: 0 auto 1rem;">
    {{ end }}
  </div>

  <!-- Render pages under home, excluding index.md -->
{{ range $homeSections }}
  <section style="padding:2rem; margin:1rem 0; text-align:center; width:100%;">
    <h2>{{ .Title }}</h2>
    {{ with .Page }}
      {{ .Content | safeHTML }}
    {{ end }}
  </section>
{{ end }}


</div>

{{ end }}
