<!-- layouts/partials/form_submit_button.html -->

<fieldset id="optional_email_field" style="display:none;">
  <label>Email (optional) if you would like a copy of your form</label>
  <input type="email" class="short-input">
</fieldset>

<button type="submit">Send</button>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.currentScript.closest("form");
    const optionalEmail = form.querySelector("#optional_email_field");
    const hasSubmittedBy = form.querySelector("#submitted_by") !== null;

    if (!hasSubmittedBy && optionalEmail) {
      optionalEmail.style.display = "block";
    }
  });
</script>

