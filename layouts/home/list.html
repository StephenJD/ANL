{{ define "main" }}

<div style="border: 5px solid red; padding: 1rem; text-align: center;">
  HOME LAYOUT ACTIVE \layouts\home\list.html
</div>
<pre style="border:1px solid blue; padding:1rem; margin-top:1rem;">
Type: {{ .Type }}
Kind: {{ .Kind }}
Layout: {{ .Layout }}
File Path: {{ with .File }}{{ .Path }}{{ else }}nil{{ end }}
BaseFileName: {{ with .File }}{{ .BaseFileName }}{{ else }}nil{{ end }}
</pre>

{{/* Only fetch if parameter exists */}}
{{ $logo := "" }}
{{ with .Params.hero_logo }}
  {{ $logo = $.Resources.GetMatch (printf "%s" .) }}
{{ end }}

{{ $bg := "" }}
{{ with .Params.hero_background }}
  {{ $bg = $.Resources.GetMatch (printf "%s" .) }}
{{ end }}

<div style="
  background-color: #f0f0f0;
  background-image: url('{{ $bg | relURL }}');
  background-size: cover;
  background-position: center;
  min-height: 100vh;
  padding: 2rem;
">

  <!-- Hero logo -->
  <div style="
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    min-height: 70vh;
  ">
    <img src="{{ $logo | relURL }}" alt="ANL Logo" style="max-width:300px; margin-bottom:1rem;">
  </div>

  {{ $homeSections := where .Site.RegularPages "Type" "home" }}
  
  {{ if eq .Params.links_position "before" }}
    {{ partial "home_sibling_links.html" . }}
  {{ end }}

  {{/* Render other home/*.md sections except _index.md */}}
  {{ range $homeSections }}
    {{ if ne .File.Path "content/home/_index.md" }}
      <section style="padding:2rem; margin:1rem 0; text-align:center;">
        <h2>{{ .Title }}</h2>
        {{ .Content }}
      </section>
    {{ end }}
  {{ end }}

  {{ if eq .Params.links_position "after" }}
    {{ partial "home_sibling_links.html" . }}
  {{ end }}

</div>
{{ end }}
